●付属CD-ROMについて

■付属CD-ROMの内容

　本書の付属CD-ROMには、

●	GNU Compiler Collection（Windows版）
●	本書に掲載されたソースコード

を収録しています。ご利用にあたっては、CD-ROMに収録されているReadme.txtファイルを必ずお読みください。また、「GNU Compiler Collection」のインストールについては、後述する「MinGW GCC4.4のインストール」を参照してください。

■動作環境

　付属CD-ROMに収録したサンプルは、次のオペレーティングシステムで動作検証を行っています。これ以外のオペレーティングシステムの上でも動作させることができますが、動作はOSやコンパイラによって異なります。

・Windows 7
・Windows Vista
・Windows XP

　付属CD-ROMに収録されているサンプルファイルの文字コードはShift JISです。UNIXやMac OS Xなど、Shift JIS以外の文字コードをデフォルトにしているOSでは、文字コードの変換が必要になる場合があります。

■サンプルファイルについて

　付属CD-ROMの「TYCPP4TH」フォルダ以下にある「src」フォルダには、本書に掲載されたソースコード、および解答が章ごとのファイルに分けて格納されています。各ファイル中で、リストは書籍中に掲載している順に並べられています。ファイルをコンピュータのハードディスクにコピーしたうえで（方法は後述します）、ファイルを編集して使用したいリストを切り取ってご使用ください。

＜「src」フォルダの内容＞
ch01.txt	第1章のソースコード
ch02.txt	第2章のソースコード
…中略…
ch14.txt	第14章のソースコード
ans01.txt	第1章の解答
ans02.txt	第2章の解答
…中略…
ans14.txt	第14章の解答

■ご注意ください

　付属CD-ROM内のプログラムやデータなどを運用したり、技術情報を応用した結果に対して、株式会社翔泳社、著者、翻訳者、監修者、ソフトウェア提供者は、一切の責任を負いません。
　付属CD-ROM内のプログラムは著作権法により保護されています。個人で使用する以外には使うことはできません。作者の許可なくネットワークなどへの配布はできません。
　付属CD-ROMに収録されているプログラムの使い方に関して、株式会社翔泳社、著者、翻訳者、監修者、ソフトウェアの提供者はお答えしかねます。

●MinGW GCC4.4のインストール

　ここでは、本書の学習環境として付属CD-ROMに収録されているGNU Compiler Collection（MinGW：Minimalist GNU for Windows）のインストール手順を説明します。この学習環境はWindows 7、Windows Vista、またはWindows XP（いずれも32ビット版）での動作を前提にしています。

■MinGWとは

　MinGWとは、UNIX等で広く用いられているC/C++などの言語に対応したコンパイラであるGNU Compiler Collectionと、コンパイラシステムの構築に利用されるランタイムヘッダ群を、Microsoft Windows上で利用できるようにしたソフトウェアのことです。MinGWはインターネット上のコミュニティによって開発およびメンテナンスが行われており、自由に使うことのできるソフトウェアです。
　MinGWを構成するソフトウェアの一部は、GNU General Public Licenseに基づいて配布されています。http://www.mingw.org/licenseを参照し、ソフトウェアのライセンスを確認した上でご利用ください。MinGWのWebサイトはhttp://www.mingw.org/にあり、メーリングリスト（英語）のログを検索したり、インストーラなどをダウンロードできます。

■学習環境のセットアップ方法

　本書の付属CD-ROMには、最小限のMinGWランタイム環境が収録されています。これを利用するには、CD-ROM中にある「TYCPP4TH」フォルダを、利用するコンピュータのCドライブ直下にコピーします。
　次に、コピー先の「TYCPP4TH」フォルダをダブルクリックして開きます。「mingw」をダブルクリックすると、コマンドプロンプトが立ち上がります（このファイルの拡張子はBATです。ファイルの拡張子を表示する設定になっている場合は、「.BAT」の付いたファイルをダブルクリックしてください）。
　Windowsのスタートメニューから起動するコマンドプロンプトとは異なり、必要な環境変数が設定されて起動しますので、学習の際には必ずこの方法でコマンドプロンプトを立ち上げてください。
　正しくコピーされたか確かめるには、起動したプロンプトで以下のようなコマンドを入力し、［Enter］キーを押します。以下のように表示されればコピーは成功です。

  C:\TYCPP4TH> g++ -v
  Using built-in specs.
  Target: mingw32
  Configured with: ../gcc-4.4.0/configure --enable-
  languages=c,ada,c++,fortran,java,objc,obj-c++ --disable-sjlj-exceptions 
  --enable-shared --enable-libgcj --enable-libgomp --with-dwarf2 
  --disable-win32-registry --enable-libstdcxx-debug --enable-version-
  specific-runtime-libs --prefix=/mingw --with-gmp=/mingw/src/gmp/root 
  --with-mpfr=/mingw/src/mpfr/root --build=mingw32
  Thread model: win32
  gcc version 4.4.0 (GCC)
  
  C:\TYCPP4TH>

　コマンドを入力する際には、日本語入力モードになっているとエラーになってしまいます。日本語入力がオフになっていることを確認してください。

■「読み取り専用」属性を解除する

　CD-ROMからコピーしたファイルには、お使いのOSによっては「読み取り専用」属性が設定されていることがあります。その場合、これを解除する必要があります。今、起動したコマンドプロンプト上で、次のようにコマンドを入力して「読み取り専用」属性を解除してください。

  C:\TYCPP4TH> attrib -R src /S /D

　お使いのOSで環境変数の設定を変更している場合には、上記のコマンドが正しく実行できないことがあります。その際には、Windowsのシステムフォルダを指定して、コマンドを実行する必要があります。

  C:\TYCPP4TH> C:\Windows\system32\attrib -R src /S /D

　以上で必要な設定は終了です。

■標準のフォルダ以外にセットアップするには

　MinGWの環境を、上記で説明したフォルダ以外の場所にコピーした場合、コンパイラの起動に使用しているファイル（mingw.bat）の記述内容を変更しなくてはなりません。お使いの起動ファイルをメモ帳などのテキストエディタで開き、環境変数MINGW_DIRの内容を変更します。

  【変更前】
  ; 次の行をMinGWをコピーしたフォルダに書き換えてください。
  SET MINGW_DIR=C:\TYCPP4TH\MinGW44

  【変更後】
  ; 次の行をMinGWをコピーしたフォルダに書き換えてください。
  SET MINGW_DIR=<ここにMinGW44フォルダへのフルパスを記述する>

　たとえば、コンパイラを「C:\tools\MinGW44」フォルダにコピーした場合には

  SET MINGW_DIR=C:\tools\MinGW44

と変更します。また、「C:\Program Files」など、パスに空白文字が含まれる場合には、

  SET MINGW_DIR="C:\Program Files\MinGW44"

というように、フルパス自体を二重引用符（ダブルクォーテーション）で囲む必要があります。

■コマンドプロンプトの簡単な使い方

　コマンドプロンプト上で最初に行うのは、カレントフォルダ（カレントディレクトリ）の移動です。カレントフォルダを移動するにはchdirコマンド（またはcdコマンド）を使用します。

  chdir [移動先のディレクトリパス]

　たとえば、「TYCPP4TH」以下にある「src」フォルダへ移動するには、以下のコマンドを入力します。

  C:\TYCPP4TH> chdir src

　すると、プロンプトの表示が以下のように変化します。これでフォルダの移動ができたことになります。

  C:\TYCPP4TH\src>

　C言語とは直接関連がないため、コマンドプロンプトの詳しい使い方について本書でこれ以上触れません。『Windowsコマンドプロンプト辞典』（翔泳社刊）などの書籍を参照してください。

■C++プログラムのコンパイルおよび実行方法

　付属CD-ROMに収録したサンプルのC++プログラムを実行するには、まず、「ch01.txt」などのサンプルファイルから必要なコード部分をコピーしたテキストファイル（ソースファイル）を作成します。ファイルの拡張子は「cpp」や「cc」とします（一般的に、C++のソースファイルの拡張子はこのようにします）。
　ソースファイルが用意できたら、それをコンパイルする必要があります。ソースファイルを保存したフォルダに移動したうえで、以下のようなコマンドを実行してください。

  C:\TYCPP4TH\src> g++ test.cpp

　この例では、ソースファイル名を「test.cpp」としています。ここでは生成する実行ファイルの名前を指定していないので、「a.exe」という名前のファイルが生成されます。これを実行するには、以下のコマンドを実行します（「.exe」は省略可能です）。

  C:\TYCPP4TH\src> a

　コンパイル時に、生成する実行ファイルの名前（この例では「test.exe」とします）を指定するには、以下のようにします。

  C:\TYCPP4TH\src> g++ -o test.exe test.cpp

　これで、「test」というコマンドでプログラムを実行できます。
